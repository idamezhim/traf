<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-38404388-22"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-38404388-22');
    </script>
    <meta charset="utf-8">
    <title>Take 5</title>
    <meta name="keywords" content="james, traf, james traf, simple, minimal, design, ux, ui, development">
    <meta name="description" content="Take a 5 minute breather.">
    <meta name="author" content="@traf">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta property="og:title" content="Traf">
    <meta property="og:description" content="Experimental design lover">
    <meta property="og:image" content="https://tr.af/images/social.jpg">
    <meta property="og:url" content="https://tr.af">
    <meta name="twitter:card" content="summary_large_image">
    <link href="/images/favicon.ico" rel="shortcut icon">
    <link href="/css/styles.css" rel="stylesheet">
</head>
<body class="animsition">
  <nav class="nav">
  <a href="/" class="nav-logo"><img src="/images/logo-traf.png" alt="traf"/></a>
  <div class="nav-links">
    <a href="/projects.html" class="nav-link">Projects</a>
    <a href="/clients.html" class="nav-link">Clients</a>
    <a href="/moments.html" class="nav-link">Moments</a>
    <a href="/thoughts.html" class="nav-link">Thoughts</a>
    <a href="/supply.html" class="nav-link">Supply</a>
    <!-- <button class="nav-link">More <i class="icon" data-feather="chevron-down"></i></button> -->
  </div>
  <!-- <div class="nav-more">
    <a href="/beats.html" class="nav-link">Beats</a>
    <a href="/5.html" class="nav-link">Take 5</a>
    <button class="nav-link">Less <i class="icon" data-feather="chevron-up"></i></button>
  </div> -->
  <button class="nav-toggle">
    <div class="lines">
      <span class="line line-1"></span>
      <span class="line line-2"></span>
    </div>
  </button>
</nav>
  <div class="hero breather">
    <div class="main">
      <h1 class="remaining">Take a 5 minute breather and clear your mind.<p>Click anywhere to start.</p></h1>
      <canvas class="timer" width="400" height="400"></canvas>
      <svg class="flower" viewBox="0 0 1000 1000">
        <g class="rose">
          <circle cx="500" cy="500" r="225" style="--angle:300deg;"></circle>
          <circle cx="500" cy="500" r="225" style="--angle:240deg;"></circle>
          <circle cx="500" cy="500" r="225" style="--angle:180deg;"></circle>
          <circle cx="500" cy="500" r="225" style="--angle:120deg;"></circle>
          <circle cx="500" cy="500" r="225" style="--angle:60deg;"></circle>
          <circle cx="500" cy="500" r="225" style="--angle:0deg;"></circle>
        </g>
      </svg>
    </div>
  </div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
<script src="js/scripts.min.js"></script>
<script>
  $(document).ready(function(){

    var isMobile = window.matchMedia("only screen and (max-width: 600px)").matches;
    if(isMobile) {
    } else {

      // Fade hero contents on scroll
      $(window).scroll(function(i){
        var scrollVar = $(window).scrollTop();
        $('.hero').css({'opacity':( 440-scrollVar )/440});
      });

      // $(document).easteregg({
      //   sequence : [84, 82, 65, 70],
      //   callback : function () {
      //     alert('Traf!');
      //   }
      // });

    }

    // Nav toggle
    $('.nav-toggle').click(function(){
      $(this).toggleClass('toggle');
      $('.nav').toggleClass('nav-show');
      $('.nav-links').toggleClass('nav-links-show');
    });

    // Active nav link
    $('.nav-links a[href$="/' + location.pathname.split("/")[1] + '"]').addClass('nav-active');

    // Feather icons
    feather.replace()

    // Page transitions
    $(".animsition").animsition({
        linkElement: 'a:not([target="_blank"]):not([href^="#"])',
        linkElement: '.animsition-link',
        outDuration: 600,
        inDuration: 600,
    });

  });
</script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.14.1/moment.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment-duration-format/1.3.0/moment-duration-format.min.js"></script>
  <script>
    let main = document.querySelector('.main');
    let display = document.querySelector('.timer');
    let displayCtx = display.getContext('2d');
    let remaining = document.querySelector('.remaining');
    let duration = moment.duration(5, 'minutes');
    let displaySize = display.width;
    main.addEventListener('click', () => {
      if (main.className !== 'waiting') {
        displayTime(moment().add(duration));
      }
    });
    function displayTime(endMoment) {
      var audio = new Audio('sounds/ding.mp3');
      let now = moment();
      if (endMoment.isAfter(now)) {
        let timeLeft = moment.duration(endMoment.diff(now));
        main.className = 'waiting';
        remaining.innerText = timeLeft.format('m:ss', { trim: false });
        clearDisplay();
        renderTrack();
        renderProgress(timeLeft.asMilliseconds() / duration.asMilliseconds());
        requestAnimationFrame(displayTime.bind(this, endMoment));
      } else {
        audio.play();
        audio.volume = 0.2;
        main.className = 'done';
        remaining.innerText = 'Enjoy your day.';
        clearDisplay();
      }
    }
    function clearDisplay() {
      displayCtx.clearRect(0, 0, displaySize, displaySize);
    }
    function renderTrack() {
      displayCtx.strokeStyle = 'hsla(0, 0%, 100%, 0.2)';
      displayCtx.lineWidth = 2;
      displayCtx.beginPath();
      displayCtx.arc(displaySize / 2, displaySize / 2, displaySize * 0.45, 0, Math.PI * 2);
      displayCtx.stroke();
    }
    function renderProgress(amount) {
      displayCtx.strokeStyle = 'hsla(216, 100%, 50%, 1)';
      displayCtx.lineWidth = 2;
      displayCtx.beginPath();
      displayCtx.arc(displaySize / 2, displaySize / 2, displaySize * 0.45, Math.PI * 2 * (1 - amount) - Math.PI / 2, 0 - Math.PI / 2, false);
      displayCtx.stroke();
    }
  </script>
</body>
</html>